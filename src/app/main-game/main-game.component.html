<div class="game-container">
    <div class="row">
        <div class="extra-options col-12 col-sm-3">
            <div class="toolbar p-2">
                <app-dark-mode-toggle></app-dark-mode-toggle>
                <br>
                <app-restart-game
                    (restartEvent)="closeGameOverModal()">
                </app-restart-game>
                <br>
                {{ getGameState() | async }}
            </div>
        </div>
    
        <div class="main-game col-12 col-sm-5">
            <ng-container [ngSwitch]="getGameState() | async">
                <app-generation-roulette
                    *ngSwitchCase="'game-start'"
                    (generationSelectedEvent)="storeGeneration($event)"
                    (trainerGenderEvent)="storeTrainerSprite($event)">
                </app-generation-roulette>
                <app-starter-roulette
                    *ngSwitchCase="'starter-pokemon'"
                    [generation]="generation"
                    (selectedStarterEvent)="storePokemon($event)">
                </app-starter-roulette>
                <app-shiny-roulette
                    *ngSwitchCase="'check-shininess'"
                    (isShinyEvent)="setShininess($event)">
                </app-shiny-roulette>
                <app-start-adventure-roulette
                    *ngSwitchCase="'start-adventure'"
                    (catchPokemonEvent)="catchPokemon()"
                    (battleTrainerEvent)="chooseWhoWillEvolve()"
                    (buyPotionsEvent)="buyPotions()"
                    (doNothingEvent)="doNothing()">
                </app-start-adventure-roulette>
                <app-pokemon-from-generation-roulette
                    *ngSwitchCase="'catch-pokemon'"
                    [generation]="generation"
                    (selectedPokemonEvent)="storePokemon($event)">
                </app-pokemon-from-generation-roulette>
                <app-pokemon-from-aux-list-roulette
                    #auxListRoulette
                    *ngSwitchCase="'select-from-pokemon-list'"
                    [wheelTitle]="customWheelTitle"
                    [trainerTeam]="auxPokemonList"
                    (selectedMemberEvent)="continueWithPokemon($event)">
                </app-pokemon-from-aux-list-roulette>
                <app-gym-battle-roulette
                    *ngSwitchCase="'gym-battle'"
                    [generation]="generation"
                    [currentRound]="leadersDefeatedAmount"
                    [trainerTeam]="trainerTeam"
                    (battleResultEvent)="gymBattleResult($event)">
                </app-gym-battle-roulette>
                <app-check-evolution-roulette
                    *ngSwitchCase="'check-evolution'"
                    [(evolutionCredits)]="evolutionCredits"
                    (evolvePokemonEvent)="chooseWhoWillEvolve()"
                    (doNothingEvent)="doNothing()">
                </app-check-evolution-roulette>
                <app-main-adventure-roulette
                    *ngSwitchCase="'adventure-continues'"
                    (catchPokemonEvent)="catchPokemon()"
                    (battleTrainerEvent)="chooseWhoWillEvolve()"
                    (buyPotionsEvent)="buyPotions()"
                    (doNothingEvent)="doNothing()"
                    (catchTwoPokemonEvent)="catchTwoPokemon()"
                    (visitDaycareEvent)="chooseWhoWillEvolve()"
                    (teamRocketEncounterEvent)="teamRocketEncounter()"
                    (mysteriousEggEvent)="mysteriousEgg()"
                    (legendaryEncounterEvent)="legendaryEncounter()"
                    (tradePokemonEvent)="tradePokemon()"
                    (findItemEvent)="findItem()"
                    (exploreCaveEvent)="exploreCave()"
                    (snorlaxEncounterEvent)="snorlaxEncounter()"
                    (multitaskEvent)="multitask()"
                    (goFishingEvent)="goFishing()"
                    (findFossilEvent)="findFossil()"
                    (battleRivalEvent)="battleRival()">
                </app-main-adventure-roulette>
                <app-team-rocket-roulette
                    *ngSwitchCase="'team-rocket-encounter'"
                    (stealPokemonEvent)="stealPokemon()"
                    (nothingHappensEvent)="doNothing()"
                    (defeatInBattleEvent)="chooseWhoWillEvolve()">
                </app-team-rocket-roulette>
                <app-mysterious-egg-roulette
                    *ngSwitchCase="'mysterious-egg'"
                    (selectedPokemonEvent)="storePokemon($event)">
                </app-mysterious-egg-roulette>
                <app-legendary-roulette
                    *ngSwitchCase="'legendary-encounter'"
                    [generation]="generation"
                    (selectedPokemonEvent)="legendaryCaptureChance($event)">
                </app-legendary-roulette>
                <app-catch-legendary-roulette
                    *ngSwitchCase="'catch-legendary'"
                    (catchLegendaryEvent)="legendaryCaptureSuccess()"
                    (nothingHappensEvent)="doNothing()">
                </app-catch-legendary-roulette>
                <app-trade-pokemon-roulette
                    *ngSwitchCase="'trade-pokemon'"
                    (selectedPokemonEvent)="performTrade($event)">
                </app-trade-pokemon-roulette>
                <app-find-item-roulette
                    *ngSwitchCase="'find-item'"
                    (itemSelectedEvent)="recieveItem($event)">
                </app-find-item-roulette>
            </ng-container>
        </div>
    
        <div class="trainer-info col-12 col-sm-4">
            <div class="trainer-team">
                <app-trainer-team
                    [trainer]="trainer"
                    [trainerTeam]="trainerTeam"
                    [trainerBadges]="trainerBadges">
                </app-trainer-team>
            </div>
    
            <div class="items">
                <app-items
                    [trainerItems]="trainerItems">
                </app-items>
            </div>
        </div>
    </div>
</div>

<ng-template #explainEventModal let-modal>
	<div class="modal-body">
        <h1>{{ explainEventModalTitle }}</h1>
        <div class="explain-panel">
            <img [src]="explainEventModalImg"
                 height="128">
            <div class="quotes">
                <p>{{explainEventModalText}}</p>
            </div>
        </div>
	</div>
    <div class="modal-footer">
        <button type="button"
                class="btn btn-outline-primary"
                (click)="closeExplainEventModal()">Ok</button>
    </div>
</ng-template>

<ng-template #gameOverModal let-modal>
	<div class="modal-body">
        <h1>Run is Over.</h1>
        <div class="explain-panel">
            <div class="quotes">
                <p>Try Again?</p>
            </div>
        </div>
	</div>
    <div class="modal-footer">
        <button type="button"
                class="btn btn-outline-primary"
                (click)="closeGameOverModal()">Restart</button>
    </div>
</ng-template>